{"version":3,"sources":["App.js","index.js"],"names":["player","App","_useState","useState","_useState2","Object","slicedToArray","search","setSearch","_useState3","data","_useState4","filteredData","setFilteredData","_useState5","_useState6","searchResults","setSearchResults","_useState7","_useState8","ctime","setCtime","_useState9","_useState10","currentsearch","setCurrentsearch","_useState11","_useState12","totalResult","setTotalResult","_useState13","_useState14","isProtected","setProtected","convertTime","time","tokens","split","minutes","parseInt","seconds","onPlayerStateChange","event","Update","window","YT","PlayerState","PLAYING","setInterval","current_time","getCurrentTime","UpdateMarkers","PAUSED","clearInterval","useEffect","Player","height","width","videoId","events","onStateChange","i","findIndex","d","startTime","endTime","document","getElementById","scrollIntoView","block","react_default","a","createElement","className","onSubmit","e","preventDefault","value","setTimeout","alert","id","type","name","href","onClick","pauseVideo","index","parentNode","behavior","aria-hidden","length","wrapText","myRegExp","RegExp","toLowerCase","filteredDataNew","map","_objectSpread","highlight","text","includes","replace","searchResultsNew","getElementsByClassName","placeholder","onChange","target","key","seekTo","playVideo","play","substring","indexOf","dangerouslySetInnerHTML","__html","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.066a37dd.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport data from \"./transcript_sbv_1.json\";\nlet player;\n\nfunction App() {\n    // State and setters for ...\n    // Search term\n    const [search, setSearch] = useState(\"\");\n    const [filteredData, setFilteredData] = useState(data);\n    const [searchResults, setSearchResults] = useState([]);\n\n    const [ctime, setCtime] = useState(0);\n    const [currentsearch, setCurrentsearch] = useState(0);\n    const [totalResult, setTotalResult] = useState(0);\n    const [isProtected, setProtected] = useState(false);\n\n    useEffect(() => {\n        if (isProtected == true) {\n            player = new window.YT.Player(\"player\", {\n                height: \"390\",\n                width: \"100%\",\n                videoId: \"sj9pf0Idamw\",\n                events: {\n                    \"onStateChange\": onPlayerStateChange\n                }\n            });\n        }\n    }, []);\n\n    useEffect(() => {\n        if (ctime > 0) {\n            const i = data.findIndex(d =>\n                ctime >= convertTime(d.startTime) && ctime <= convertTime(d.endTime)\n            );\n            if (i > -1) {\n                document.getElementById(\"line\" + i).scrollIntoView({block: \"center\"});\n            }\n        }\n    }, [ctime]);\n\n    function convertTime(time) {\n        const tokens = time.split(\":\");\n        const minutes = parseInt(tokens[1]);\n        let seconds = parseInt(tokens[2]);\n        seconds = minutes * 60 + seconds;\n        return seconds;\n    }\n\n    function onPlayerStateChange(event) {\n        var Update;\n        if (event.data == window.YT.PlayerState.PLAYING) {\n            Update = setInterval(function () {\n                UpdateMarkers()\n            }, 100);\n        } else if (event.data == window.YT.PlayerState.PAUSED) {\n            clearInterval(Update);\n        } else {\n            clearInterval(Update);\n        }\n    }\n\n    function UpdateMarkers() {\n        var current_time = player.getCurrentTime();\n        setCtime(current_time)\n    }\n\n    function play(startTime) {\n        const tokens = startTime.split(\":\");\n        const minutes = parseInt(tokens[1]);\n        let seconds = parseInt(tokens[2]);\n        seconds = minutes * 60 + seconds;\n        player.seekTo(seconds);\n        player.playVideo();\n    }\n\n    function handleSearch(e) {\n        //console.log(e.target.value.length);\n        setSearch(e.target.value);\n    }\n\n    function handleSearchPrev(e) {\n        e.preventDefault();\n        player.pauseVideo();\n        let index = (currentsearch == -1 || currentsearch == 0) ? 0 : currentsearch - 1;\n        if (searchResults[index]) {\n            setTimeout(function () {\n                searchResults[index].parentNode.scrollIntoView({ block: 'start', behavior: 'smooth' });\n                setCurrentsearch(index);\n            }, 500)\n        }\n    }\n\n    function handleSearchNext(e) {\n        e.preventDefault();\n        player.pauseVideo();\n        let index = (currentsearch == -1) ? 0 : currentsearch + 1;\n        if (searchResults[index]) {\n            setTimeout(function () {\n                searchResults[index].parentNode.scrollIntoView({ block: 'start', behavior: 'smooth' });\n                setCurrentsearch(index);\n            }, 500)\n        }\n    }\n\n    function handleSearchForm(e) {\n        e.preventDefault();\n        if (search.length > 0) {\n            player.pauseVideo();\n            setTimeout(function () {\n                let wrapText = '<span class=\"highlight-word\">' + search + '</span>';\n                var myRegExp = new RegExp(search.toLowerCase(), 'g');\n                var filteredDataNew = data.map(d => {\n                    return {\n                        ...d,\n                        highlight: d.text.toLowerCase().includes(search.toLowerCase()),\n                        text: d.text.toLowerCase().replace(myRegExp, wrapText)\n                    };\n                });\n                setFilteredData(filteredDataNew);\n\n                let searchResultsNew = document.getElementsByClassName('highlight-word');\n                setSearchResults(searchResultsNew);\n                setTotalResult(searchResultsNew.length);\n\n                if (search) {\n                    const index = data.findIndex(d =>\n                        d.text.toLowerCase().includes(search.toLowerCase())\n                    );\n                    if (index > -1 && searchResults.length == 0) {\n                        document.getElementById(\"line\" + index).scrollIntoView({ block: 'start', behavior: 'smooth' });\n                    }\n                    if (searchResults.length > 0) {\n                        searchResults[0].parentNode.scrollIntoView({ block: 'start', behavior: 'smooth' });\n                        setCurrentsearch(0);\n                    }\n                }\n            }, 300)\n        }\n    }\n\n    function handlePasswordSubmit(e) {\n        e.preventDefault();\n        var password = document.getElementById('password').value;\n        if (password === 'prydan') {\n            setProtected(true);\n            setTimeout(function () {\n                player = new window.YT.Player(\"player\", {\n                    height: \"390\",\n                    width: \"100%\",\n                    videoId: \"sj9pf0Idamw\",\n                    events: {\n                        \"onStateChange\": onPlayerStateChange\n                    }\n                });\n            }, 200)\n\n        } else {\n            alert('Incorrect Password!');\n            return;\n        }\n    }\n\n    return (\n        <div className=\"app\">\n            {\n                (isProtected === false) ?\n                    <div className=\"authentication-container\">\n                        <div className=\"modal\">\n                            <h1>Private Video</h1>\n                            <p>\n                                This is private video. Do you have permission to watch it? If so please provide the correct password.\n                            </p>\n                            <form onSubmit={handlePasswordSubmit} className=\"form-input\">\n                                <input id=\"password\" type=\"password\" name=\"password\" />\n                                <button type=\"submit\" className=\"btn\">Access</button>\n                            </form>\n                        </div>\n                    </div>\n                    : null\n            }\n            {\n                (isProtected === true) ?\n                    <div>\n                        <div className=\"player\">\n                            <h1>Youtube Demo</h1>\n                            <div id=\"player\" />\n                        </div>\n                        <div className=\"transcript\">\n                            <div className=\"transcript-title\">\n                                <h2>\n                                    Search transcript\n                                </h2>\n                                {\n                                    (totalResult > 0) ?\n                                        <div className=\"search-results\">\n                                            <p>{totalResult} Matches in this video</p>\n                                            <div className=\"navigation-icons\">\n                                                <a href=\"#\" onClick={handleSearchPrev}><i className=\"fa fa-caret-left\" aria-hidden=\"true\"></i></a>\n                                                <span>{currentsearch + 1} of {totalResult}</span>\n                                                <a href=\"#\" onClick={handleSearchNext}><i className=\"fa fa-caret-right\" aria-hidden=\"true\"></i></a>\n                                            </div>\n                                        </div> : null\n                                }\n                            </div>\n                            <form className=\"input-search\" onSubmit={handleSearchForm}>\n                                <i className=\"fa fa-search\"></i>\n                                <input type=\"text\" placeholder=\"Search\" onChange={handleSearch} />\n                            </form>\n                            <div id=\"scroller\" className=\"scroller\">\n                                {filteredData.map((d, i) => (\n                                    <div\n                                        //className=\"line\"\n                                        className={(ctime >= convertTime(d.startTime) && ctime <= convertTime(d.endTime)) ? \"line line--current\" : \"line\"}\n                                        key={i}\n                                        onClick={() => play(d.startTime)}\n                                        id={\"line\" + i}\n                                    >\n                                        <div className=\"start\">{ d.startTime.substring(3, d.startTime.indexOf('.')) }</div>\n                                        <div className={d.highlight ? \"text text--highlight\" : \"text\"} dangerouslySetInnerHTML={{ __html: d.text }}></div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                    : null\n            }\n\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}